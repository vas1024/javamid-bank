

порядок запуска сервисов

первым надо запускать config
вторым - eureka
конфиг и еврика имеют циклическую зависимость друг от друга, по этому, при старте конфига будет ошибка о недоступности еврики.
но это ничего, так как, когда еврика поднимется, конфиг обновит в ней свою регистрацию.
последующие сервисы будут получать в еврике адрес и порт конфиг сервера, читать на нем свою конфигурацию ( свой порт ),
стартовать и регистрировать себя в еврике.


логика работы блока наличных cash
счет account создается при внесении на него наличных денег.
счет не удаляется. 
если на счету 0, с него нельзя снять деньги, будет ошибка.
если счета нет, с него нельзя снять деньги, будет ошибка.
при попытке снять больше денег, чем есть на счету, выдается всё, что есть и баланс счета становится 0.
это удобно для тестов на удаление пользователя.

безопасность
безопасность пользователей
логика работы
при введении логина-пароля в форме, мс front оправляет запрос с username, password  в мс auth
мс auth передает этот запрос в мс accounts, где происходит сравнение с сохраненным хешем пароля, и если ок, 
то мс accounts возвращает в мс auth userId, -1 в случае ошибки
мс auth в случае успешного ответа из accounts генерирует JWT token в который добавляет username и userId
мс front сохраняет полученный токен в куки jwt_token.
в мс front настроен SecurityConfig:
сначала срабатывает jwtAuthenticationFilter, который отправляет в мс auth запрос на валидацию токена,
а затем срабатывает authorizeHttpRequests так, чтобы при обращении по путям, содержащим id пользователя,
вызывалась бы проверка, метод authorizeHttpRequests, 
который сравнивает запрашиваемый в пути userId с userId, хранящемся в токене

в сервисе accounts так же поднят SecurityConfig, который делает те же проверки - сравнивает userId в токене
c userId в запрашиваемом пути. для этого сервис front отправляет токен в заголовке ( требует использования restTemplate.exchange)
так же для запросов которые идут по цепочке front -> cash -> accounts  and  front->transfer->accounts 
сервисы cash и accounts читают токен пришедший от фронта и передают его без проверок в accounts


конфиги всех сервисов хранятся в репозитории мс config, все, кроме самого конфиг.
все сервисы зарегистрированы в service discovery ms eureka, все, кроме самой эврики.
получается, конфиг и эврика циклически связаны, но это ничего, так как конфиг продолжит загрузку даже не найдя эврики, 
а позже в ней зарегистрируется.
всем сервисам порты назначаются в конфиг.
везде использован формат applicatoin.properties, так как для меня он гораздо более читаем, чем yaml



